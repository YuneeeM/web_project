<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="style_workpost.css" />
  <title>노인 일자리 현황</title>
</head>

<body>


  <div id="content">
    <div id="default_box">
      <h1 class="title title_content">구인정보(공공)</h1>
      <span class="title_sub">앞선 맞춤형 정보 기반으로 구인정보을 알려드립니다.</span>
    </div>
    <!--리스트형태 시작-->
    <table class="board-list" style="width: 100%" ;>
      <colgroup>
        <col width="5%">
        <col width="45%">
        <col width="25%">
        <col width="25%">
      </colgroup>
      <thead>
        <tr>
          <th>회사명/정보제공처</th>
          <th>채용공고명/담당업무/지원자격</th>
          <th>근무조건</th>
          <th>등록/마감일</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td></td>
        </tr>
      </tbody>
    </table>

  </div>

  <!--부산광역시_공공부문 일자리(채용) 정보-->

  <p id="sample_data"></p>

  <script>
    const url = '';

    const table = document.querySelector('.board-list');
    const companyColumn = table.querySelector('tbody tr td:first-child');
    dataPane = document.getElementById('sample_data');

    fetch(url)
      .then((res) => res.json())
      .then((resJson) => {
        if (
          resJson.getJobOpnngInfo &&
          resJson.getJobOpnngInfo.body &&
          resJson.getJobOpnngInfo.body.items
        ) {
          const items = resJson.getJobOpnngInfo.body.items.item;
          const filteredData = items.filter((item) => {
            const workDateTypes = item.workDate_type.split(',');
            return (
              workDateTypes.includes('무기계약직') ||
              workDateTypes.includes('비정규직')
            );
          });

          if (filteredData.length > 0) {
            const companyNames = filteredData.map(item => item.recruitAgencyName).join(', ');
            companyColumn.innerText = companyNames;
            dataPane.innerText = '조건을 만족하는 데이터가 있습니다.';
          } else {
            companyColumn.innerText = '조건을 만족하는 데이터가 없습니다.';
            dataPane.innerText = '';
          }
        } else {
          dataPane.innerText = '데이터가 올바르게 구조화되어 있지 않습니다.';
        }
      })
      .catch((error) => {
        console.log(error);
      });

  </script>

</body>

</html>