<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>노인을 위한 웹 사이트 - 취업게시판 목록</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
  <style>
    body {
      font-size: 20px;
      font-family: 'Jua', sans-serif;
      background-color: #F1F5FF;
    }

    .location a::before {
      content: '>';
      display: inline-block;
      width: 10px;
      height: 10px;
      margin-right: 5px;
      color: #bbb;
    }


    a:visited {
      color: inherit;
    }

    .location a {
      text-decoration: underline;
    }

    .sub-visual-title {
      margin-bottom: 40px;
    }

    .sub-visual-title .visual {
      display: inline-block;
      vertical-align: middle;
    }


    .sub-visual-title .info {
      display: inline-block;
      vertical-align: middle;
      margin-left: 10px;
      /* 필요한 경우 이미지와 글자 사이의 간격 조정 */
    }

    .sub-visual-title .info .title {
      display: block;
      margin-bottom: 5px;
    }

    .sub-visual-title .info .txt {
      display: block;
    }

    .write-btn {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      margin-right: 20px;
      margin-left: auto;
      background-color: #10a1fbbc;
      width: 80px;
      height: 30px;
      text-align: center;
      border-radius: 5px;
      color: #fff;

    }

    .write-btn:hover {
      background-color: #1289d3bc;
    }

    .write-btn a::after {
      color: #fff;
    }

    .write-btn a:visited {
      color: #fff;
    }

    table caption {
      overflow: hidden;
      visibility: hidden;
      ;
    }

    .board-list>thead>tr>th {
      border-bottom: 1px solid #e6e6e6;
      height: 48px;
      padding: 7px 5px;
      background-color: #f7f7f7;
      font-weight: 700;
    }

    table {
      display: table;
      text-indent: initial;
      border-spacing: 2px;
      width: 100%;
      table-layout: fixed;
      border-collapse: collapse;
      empty-cells: show;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }

    thead {
      display: table-header-group;
      vertical-align: middle;
      border-color: inherit;
    }

    .board-list {
      line-height: 2;
    }

    tbody {
      display: table-row-group;
      vertical-align: middle;
      border-color: inherit;
      background-color: #fff;
    }

    tr {
      display: table-row;
      vertical-align: inherit;
      border-color: inherit;
    }

    table th,
    table td {
      padding: 0;
      word-break: break-all;
    }

    .board-list>tbody>tr>th,
    .board-list>tbody>tr>td {
      height: 48px;
      padding: 16px 5px;
      border: 1px solid #f5f7f9;
      border-width: 0 0 1px 0;
      border-color: #e4ebf1;
      text-align: center;
      word-break: break-all;

    }

    .pagination {
      clear: both;
      position: relative;
      margin: 0 auto;
      padding: 30px 0 0 0;
      text-align: center;
    }

    .pagination .active,
    .pagination a:hover {
      color: #fff;
      line-height: 32px;
      background-color: #10a1fbbc;
      border: 0;
      border-radius: 5px;
    }

    .pagination a,
    .pagination strong,
    .pagination .control {
      display: inline-block;
      position: relative;
      min-width: 30px;
      height: 30px;
      padding: 0 4px;
      text-decoration: none;
      line-height: 30px;
      color: #666;
      font-weight: normal;
      vertical-align: middle;
    }
  </style>
</head>

<body>
  <div class="container" id="container">
    <div class="sub-util">
      <div class="location">
        <i class="iconset ico-home">홈</i>
        <a href="./startpage.html">시작페이지</a>
        <a href="./main_post.html"><strong>취업 사례 게시판</strong></a>
      </div>
    </div>
    <div class="inner-wrap no-lab">
      <div id="contents">
        <section id="contents">
          <div class="title-util">
            <h2 class="title">취업 사례 게시판</h2>
          </div>

        </section>
      </div>
    </div>
    <div class="sub-visual-title">
      <div class="visual"><img src="media/free-icon-family-4547180.png" width="150px" height="150px" alt></div>
      <div class="info">
        <strong class="title">노인 및 노숙인 취업 성공 소식</strong>
        <span class="txt">취업 사례를 공유합시다!</span>
      </div>
    </div>
    <div class="board-list-count">
      <p class="count">전체 <strong class="font-lblue">2</strong> 건</p>

    </div>
    <div class="table-wrap">
      <table class="board-list">
        <caption>노인 노숙인 취업사례 목록</caption>
        <colgroup>
          <col width="10%">
          <col width="30%">
          <col width="20%">
          <col width="20%">
          <col width="20%">
        </colgroup>
        <thead>
          <tr>
            <th scope="col">번호</th>
            <th scope="col">제목</th>
            <th scope="col">작성자</th>
            <th scope="col">좋아요 수</th>
            <th scope="col">등록일</th>
          </tr>
        </thead>
        <tbody id="post-table-body">
          <!-- 동적으로 생성되는 부분 -->
        </tbody>
      </table>
      <div class="write-btn" id="write-btn"><a href="post_write.html" style="text-decoration: none;">글쓰기</a></div>

    </div>
    <nav class="pagination">
    </nav>
  </div>
  <script>
    // post_list를 localStorage에서 검색합니다.
    const postList = JSON.parse(localStorage.getItem('post_list'));

    // 테이블 본문 요소에 대한 참조를 가져옵니다.
    const tableBody = document.getElementById('post-table-body');

    // 게시물을 한 페이지에 표시할 개수를 정의합니다.
    const itemsPerPage = 5;

    // 현재 페이지 번호를 URL 매개변수에서 가져옵니다.
    const urlParams = new URLSearchParams(window.location.search);
    const currentPage = parseInt(urlParams.get('page')) || 1;

    // 전체 페이지 수를 계산합니다.
    const totalPages = Math.ceil(postList.length / itemsPerPage);

    // 게시물 리스트에서 현재 페이지에 해당하는 게시물들을 추출합니다.
    const startIndex = (currentPage - 1) * itemsPerPage;
    const endIndex = startIndex + itemsPerPage;
    const currentPagePosts = postList.slice(startIndex, endIndex);

    // 게시물 리스트를 기반으로 동적으로 테이블 행과 셀을 생성합니다.
    if (currentPagePosts && currentPagePosts.length > 0) {
      currentPagePosts.forEach((post, index) => {
        // 새로운 테이블 행을 생성합니다.
        const row = document.createElement('tr');

        // 번호 셀을 생성하고 값 설정합니다.
        const numberCell = document.createElement('td');
        numberCell.textContent = index + startIndex + 1;
        row.appendChild(numberCell);

        // 제목 셀을 생성하고 값 설정합니다.
        const titleCell = document.createElement('td');
        titleCell.textContent = post.title;
        row.appendChild(titleCell);

        // 작성자 셀을 생성하고 값 설정합니다.
        const authorCell = document.createElement('td');
        authorCell.textContent = post.writer;
        row.appendChild(authorCell);

        // 좋아요 수 셀을 생성하고 값 설정합니다.
        const likesCell = document.createElement('td');
        likesCell.textContent = post.likes ? post.likes : 0; // 저장된 값이 존재하면 출력하고, 없으면 0을 출력합니다.
        row.appendChild(likesCell);

        // 등록일 셀을 생성하고 값 설정합니다.
        const dateCell = document.createElement('td');
        dateCell.textContent = post.createdDate;
        row.appendChild(dateCell);

        // 생성된 행을 테이블 본문에 추가합니다.
        tableBody.appendChild(row);
      });

      // 전체 게시물 개수를 가져옵니다.
      const totalCount = postList ? postList.length : 0;

      // 전체 게시물 개수를 표시하는 요소에 접근합니다.
      const countElement = document.querySelector('.count strong.font-lblue');

      // 개수를 업데이트합니다.
      countElement.textContent = totalCount;

      // 페이지네이션 생성
      const numPageLinks = 2; // 현재 페이지 주변에 표시할 페이지 수

      // 페이지네이션 컨테이너 요소에 접근합니다.
      const pagination = document.querySelector('.pagination');

      // 이전 페이지 링크 생성 및 추가
      if (currentPage > 1) {
        const prevPageLink = document.createElement('a');
        prevPageLink.textContent = '이전';
        prevPageLink.href = `?page=${currentPage - 1}`;
        pagination.appendChild(prevPageLink);
      }

      // 페이지 번호 링크 생성 및 추가
      for (let i = 1; i <= totalPages; i++) {
        const pageLink = document.createElement('a');
        pageLink.textContent = i;
        pageLink.href = `?page=${i}`;

        if (i === currentPage) {
          pageLink.classList.add('active');
        }

        pagination.appendChild(pageLink);
      }

      // 다음 페이지 링크 생성 및 추가
      if (currentPage < totalPages) {
        const nextPageLink = document.createElement('a');
        nextPageLink.textContent = '다음';
        nextPageLink.href = `?page=${currentPage + 1}`;
        pagination.appendChild(nextPageLink);
      }

      // 동적으로 생성된 행들에 대해 클릭 이벤트를 추가합니다.
      const rows = document.querySelectorAll('#post-table-body tr');
      rows.forEach((row, index) => {
        row.addEventListener('click', () => {
          // 해당 게시물의 상세 페이지 URL을 가져옵니다.
          const postDetailURL = `./post_detail.html?id=${startIndex + index + 1}`;

          // 상세 페이지로 이동합니다.
          window.location.href = postDetailURL;
        });
      });
    }
  </script>
</body>

</html>